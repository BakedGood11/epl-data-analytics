# a(r)senal-analysis

[![Project Status: Complete](https://www.repostatus.org/badges/latest/active.svg)](https://www.repostatus.org/#active)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

*Disclaimer: This project is for educational purposes only and is not affiliated with Arsenal Football Club or the English Premier League. The data used in this project is publicly available and is not guaranteed to be accurate.*

## Table of Contents

*   [Project Overview](#project-overview)
*   [Project Status](#project-status)
*   [Technologies Used](#technologies-used)
*   [Building and Running](#building-and-running)
*   [Getting Help](#getting-help)
*   [FAQ](#faq)
*   [Support](#support)
*   [Project Files](#project-files)
*   [Dependencies](#dependencies)
*   [Data Sources](#data-sources)
*   [Database Schema](#database-schema)
*   [Data Visualizations](#data-visualizations)
*   [Research Questions](#research-questions)
*   [Methodology](#methodology)
*   [Definition of Terms](#definition-of-terms)
*   [Future Work](#future-work)
*   [Contributing](#contributing)
*   [Author](#author)
*   [Acknowledgements](#acknowledgements)
*   [Development Conventions](#development-conventions)

## Project Overview

This project is a data analysis of Arsenal Football Club's performance in the 2024-2025 English Premier League season. The analysis is conducted using R and R Markdown, with data sourced from a MariaDB database. The primary goal is to understand why Arsenal, despite a strong defense, failed to win the league, focusing on their attacking inefficiencies.

The final output is a PDF report generated from the `Arsenal_stats_24-25.Rmd` file.

## Project Status

This project is part of an ongoing series that is meant to allow me to learn and experiement with analytical tools and programs. See #future-work for planned enhancements and additions.

## Technologies Used

*   **R**
*   **RStudio**
*   **MariaDB**
*   **Docker**
*   **VSCode**

## Building and Running

This is an R project and is best managed using RStudio.

1.  **Prerequisites:**
    *   R and RStudio installed.
    *   Access to the MariaDB database with the relevant data. The RMD file loads connection details from a `~/.Renviron` file. Ensure this file is present and contains the correct credentials:
        ```
        MARIADB_HOST=<your_host>
        MARIADB_PORT=<your_port>
        MARIADB_USER=<your_user>
        MARIADB_PWD=<your_password>
        MARIADB_PL_DB=<your_database_name>
        ```
    *   The following R packages installed: `DBI`, `RMariaDB`, `ggplot2`, `dplyr`, `dbplyr`, `tinytex`, `tidyr`, `knitr`, `zoo`, `ggrepel`, `ggcorrplot`, `stats`, `ggpmisc`, `broom`, `kableExtra`.

2.  **Running the Analysis:**
    *   Open the `a(r)senal-analysis.Rproj` file in RStudio.
    *   Open the `Arsenal_stats_24-25.Rmd` file.
    *   Click the "Knit" button in RStudio to generate the PDF report.

## Getting Help

If you have any questions or issues with this project, please open an issue on the project's GitHub page.

## FAQ

*   **Why Arsenal?**
    *   The team was chosen because of their ability to outperform league leaders and top contenders in the UEFA Champion's League (particularly their 3-0 win over Real Madrid) yet showing recurring inconsistencies in front of goal.

## Project Files

*   `a(r)senal-analysis.Rproj`: The RStudio project file.
*   `Arsenal_stats_24-25.Rmd`: The R Markdown file containing the analysis, code, and narrative.
*   `Arsenal_stats_24-25.html`: The HTML output of the R Markdown file.
*   `Arsenal_stats_24-25.pdf`: The PDF output of the R Markdown file.
*   `preamble.tex`: A LaTeX file used to format the PDF output.
*   `README.md`: This file.
*   `figures/`: A directory containing the plots and visualizations generated by the R Markdown file.

## Dependencies

This project relies on the following R packages:

*   `DBI`: A database interface for R, used to connect to the MariaDB database.
*   `RMariaDB`: The driver for connecting to MariaDB.
*   `ggplot2`: A system for declaratively creating graphics, based on The Grammar of Graphics.
*   `dplyr`: A grammar of data manipulation, providing a consistent set of verbs that help you solve the most common data manipulation challenges.
*   `dbplyr`: A `dplyr` backend for databases that allows you to work with remote database tables as if they are in-memory data frames.
*   `tinytex`: A lightweight, cross-platform, and easy-to-maintain LaTeX distribution.
*   `tidyr`: Tidy Messy Data.
*   `knitr`: A general-purpose literate programming engine in R.
*   `zoo`: An S3 class with methods for totally ordered indexed observations.
*   `ggrepel`: Repulsive Text and Label Geoms for `ggplot2`.
*   `ggcorrplot`: Visualization of a correlation matrix using `ggplot2`.
*   `stats`: R's base package for statistical calculations.
*   `ggpmisc`: Miscellaneous Extensions to `ggplot2`.
*   `broom`: Convert Statistical Analysis Objects into Tidy Tibbles.
*   `kableExtra`: Construct Complex Table with `knitr::kable()` + `magrittr` Pipe.

## Data Sources

The data for this project was sourced from the following locations:

*   [EPL Player Match Data](https://www.kaggle.com/datasets/aesika/english-premier-league-player-stats-2425): Aggregated player statistics for the 2024-2025 season.
*   [EPL Fixture Data](https://www.kaggle.com/datasets/secretglory/epl-fixtures-list-2024-2025): The official match schedule.
*   [EPL Match Data](https://fbref.com/en/comps/9/2024-2025/schedule/2024-2025-Premier-League-Scores-and-Fixtures): Aggregated match statistics for the entire season.
*   [EPL Season Table, 2024-2025](https://fbref.com/en/comps/9/2024-2025/2024-2025-Premier-League-Stats): The league table from the 2024-2025 season.
*   [Arsenal Squad Data from 2023-2024](https://fbref.com/en/squads/18bb7c10/2024-2025/matchlogs/c9/schedule/Arsenal-Scores-and-Fixtures-Premier-League): Previous season summary statistics for context.
*   [EPL Season Table, 2023-2024](https://fbref.com/en/comps/9/2023-2024/2023-2024-Premier-League-Stats): The league table from the 2023-2024 season for context.

## Database Schema

The project uses a MariaDB database with the following tables:

*   `pl_matches`: Contains match-level data for the Premier League.
*   `pl_teams`: Contains information about each team in the Premier League.
*   `pl_players`: Contains information about each player in the Premier League.
*   `afc_23_24`: Contains data about Arsenal's performance in the 2023-2024 season.
*   `pl_table_24`: The Premier League table for the 2024-2025 season.
*   `pl_table_23_24`: The Premier League table for the 2023-2024 season.
*   `pl_player_stats`: Contains player-level statistics for the 2024-2025 season.

## Data Visualizations

This project contains the following data visualizations in the `figures` directory:

*   `ars_24_conv-1`: Arsenal's conversion rate for the 2024 season.
*   `attacking_effort-1`: A visualization of the team's attacking effort.
*   `cor_matrix_23-1`: A correlation matrix of various statistics for the 2023 season.
*   `epl_23_g_xg-1`: A comparison of goals scored versus expected goals (xG) for the 2023 English Premier League.
*   `epl_24_g_xg-1`: A comparison of goals scored versus expected goals (xG) for the 2024 English Premier League.
*   `line_10-1`: A line chart, likely showing a trend over 10 matches.
*   `pl_top10_summ-1`: A summary of the top 10 teams in the Premier League.
*   `reg_model_xg_gf-1`: A regression model of expected goals (xG) versus goals for (GF).

## Research Questions

This project aims to answer the following research questions:

*   What factors contribute to Arsenal’s inconsistent domestic performance, despite victories over top-tier teams like Real Madrid and Manchester City?
*   To what extent do expected goals (xG) and expected goals against (xGA) reliably predict actual team outcomes?
*   How does Arsenal's goal-scoring distribution among players impact their overall offensive effectiveness?

## Methodology

The analysis was conducted using the following steps:

1.  **Data Acquisition:** Aggregated match data was scraped from FBRef, and Kaggle datasets were used for player-level statistics and the official fixture list.
2.  **Data Storage:** The datasets were stored in a Docker-based MariaDB instance for reproducible querying.
3.  **Data Cleaning and Normalization:** The data was cleaned and normalized directly in SQL using VSCode’s SQL extensions.
4.  **Data Analysis and Visualization:** RStudio was connected to the database for statistical exploration and visualization. Statistical analyses were performed using R to understand Arsenal's team performance and to study the correlation of metrics like xG and xGA with team performance.

*Disclaimer: Generative AI was used in this project to help guide the writing of code chunks and SQL queries. Generative AI was not used to write analyses or full code chunks.*

## Definition of Terms

*   **GF**: Goals for
*   **GA**: Goals against
*   **GD**: Goal difference, (GF - GA)
*   **xG**: Expected goals; the number of goals a team/player is expected to score in a match. **Higher is better**
*   **xGA**: Expected goals against; the number of goals a team is expected to concede in a match. **Lower is better**
*   **xGD**: Expected goal difference; The difference between xG and xGA. **Higher is better**

## Future Work

*   **Incorporate more data sources:** The analysis could be expanded by incorporating more data sources, such as player tracking data, to provide a more granular view of player performance.
*   **Develop a predictive model:** A predictive model could be developed to forecast future match outcomes based on the available data.
*   **Create an interactive dashboard:** An interactive dashboard could be created to allow users to explore the data and visualizations in more detail.
*   **Analyze other teams:** The same analysis could be applied to other teams in the Premier League to provide a comparative view of their performance.

## Contributing

Contributions are welcome. Please open an issue to discuss your ideas.

## Author

*   **Ramon**


## Acknowledgements

*   Data provided by [Kaggle](https://www.kaggle.com/) and [FBRef](https://fbref.com/).
*   This project was created using [R](https://www.r-project.org/) and [RStudio](https://www.rstudio.com/).
*   The `tidyverse` ecosystem of packages was used for data manipulation and visualization.
*   FBref's data scraping tools and community for providing access to football statistics.

## Development Conventions

*   **Data Source:** The project relies on a MariaDB database as the single source of truth for data. The tables used are `pl_matches`, `pl_teams`, `pl_players`, `afc_23_24`, `pl_table_24`, `pl_table_23_24`, and `pl_player_stats`.
*   **Coding Style:** The R code largely follows the `tidyverse` style, utilizing packages like `dplyr` for data manipulation and `ggplot2` for visualizations.
*   **Analysis Structure:** The analysis is presented in a narrative format within the R Markdown file, with code chunks used to perform calculations and generate plots. The final output is a well-structured PDF document.
*   **File Naming:** Files are named descriptively, indicating their content and the season under analysis.